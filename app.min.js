$(document).ready(function() {
    try {
    } catch(e) {
        console.error("发生错误:", e);
        alert("屎山炸了");
    }
});

// 添加图片懒加载
document.addEventListener("DOMContentLoaded", function() {
    const images = document.querySelectorAll("img[data-src]");
    const imageObserver = new IntersectionObserver((entries, observer) => {
        entries.forEach(entry => {
            if (entry.isIntersecting) {
                const img = entry.target;
                img.src = img.dataset.src;
                img.removeAttribute("data-src");
                observer.unobserve(img);
            }
        });
    });
    
    images.forEach(img => imageObserver.observe(img));
});

function showModal(modalId) {
    const modal = document.getElementById(modalId);
    if (modal) {
        modal.style.display = "block";
        document.body.classList.add("modal-open");
        setTimeout(() => modal.classList.add("show"), 10);
    }
}
$(document).ready(function() {
    initSlider();
});

function closeNotice() {
    const notice = document.getElementById('siteNotice');
    if (notice) {
        notice.style.display = 'none';
        document.body.style.overflow = '';
    }
}


document.addEventListener('DOMContentLoaded', function() {
    const notice = document.getElementById('siteNotice');
    if (notice) {
        notice.style.display = 'flex';
        document.body.style.overflow = 'hidden';
        document.addEventListener('keydown', function(e) {
            if (e.key === 'Escape') {
                closeNotice();
            }
        });
        
        notice.addEventListener('click', function(e) {
            if (e.target === notice) {
                closeNotice();
            }
        });
    }
}); 